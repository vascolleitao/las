#include <functional>
#include <iostream>
#include <vector>

#include <fmt/core.h>
#include <fmt/ranges.h>

#include <skl/skl.hpp>


int main(int /*argc*/, const char** /*argv*/)
{
  const size_t size(100);
  std::vector<int> vec(size);

  fmt::print("vector {}\n", vec);
  auto inc = [](int& x)
  { x++; };
  auto mul = [](int& x)
  { x *= 2; };

  auto [sum] = vec
    >>= skl::map(inc)
    >>= skl::map(mul)
    >>= skl::reduce(std::plus<int>());


  fmt::print("vector {}\n", vec);
  return sum == (1 * size);
}
